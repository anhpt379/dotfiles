#!/usr/bin/env python3
#! coding: utf-8
# vim:sw=4:

import sys
from signal import signal, SIGPIPE, SIG_DFL

# http://newbebweb.blogspot.com/2012/02/python-head-ioerror-errno-32-broken.html
signal(SIGPIPE, SIG_DFL)

default_icon = ""
icons = {
    ".7z": "",
    ".DS_Store": "",
    ".ai": "",
    ".apk": "",
    ".awk": "",
    ".bash": "",
    ".bash_profile": "",
    ".bashrc": "",
    ".bat": "",
    ".bmp": "",
    ".bz2": "",
    ".c": "",
    ".c++": "",
    ".cc": "",
    ".cer": "",
    ".cfg": "",
    ".clj": "",
    ".cljc": "",
    ".cljs": "",
    ".coffee": "",
    ".conf": "",
    ".cp": "",
    ".cpp": "",
    ".crt": "",
    ".csh": "",
    ".css": "",
    ".curlrc": "",
    ".cxx": "",
    ".d": "",
    ".dart": "",
    ".db": "",
    ".deb": "",
    ".diff": "",
    ".dockerignore": "",
    ".dump": "",
    ".editorconfig": "",
    ".edn": "",
    ".eex": "",
    ".ejs": "",
    ".erb": "",
    ".erl": "",
    ".ex": "",
    ".exe": "",
    ".exs": "",
    ".eyaml": "",
    ".f#": "",
    ".fish": "",
    ".fs": "",
    ".fsi": "",
    ".fsscript": "",
    ".fsx": "",
    ".gem": "",
    ".gif": "",
    ".git": "",
    ".git/": "",
    ".gitattributes": "",
    ".gitconfig": "",
    ".github": "",
    ".github/": "",
    ".gitignore": "",
    ".gitlab-ci.yml": "",
    ".gitmessage": "",
    ".go": "",
    ".gpg": "",
    ".gz": "",
    ".gzip": "",
    ".h": "",
    ".hbs": "",
    ".hpp": "",
    ".hrl": "",
    ".hs": "",
    ".htaccess": "",
    ".htm": "",
    ".html": "",
    ".htpasswd": "",
    ".hxx": "",
    ".ico": "",
    ".img": "",
    ".ini": "",
    ".inputrc": "",
    ".iso": "",
    ".jar": "",
    ".java": "",
    ".jl": "",
    ".jpeg": "",
    ".jpg": "",
    ".js": "",
    ".json": "",
    ".jsx": "",
    ".key": "",
    ".ksh": "",
    ".less": "",
    ".lhs": "",
    ".lua": "",
    ".macos": "",
    ".markdown": "",
    ".md": "",
    ".ml": "λ",
    ".mli": "λ",
    ".mustache": "",
    ".pem": "",
    ".php": "",
    ".pl": "",
    ".plist": "",
    ".pm": "",
    ".png": "",
    ".pp": "",
    ".ps1": "",
    ".psb": "",
    ".psd": "",
    ".pub": "",
    ".py": "",
    ".pyc": "",
    ".pyd": "",
    ".pyo": "",
    ".rar": "",
    ".rb": "",
    ".rlib": "",
    ".rmd": "",
    ".rpm": "",
    ".rs": "",
    ".rss": "",
    ".sass": "",
    ".scala": "",
    ".scss": "",
    ".sh": "",
    ".slim": "",
    ".sln": "",
    ".sql": "",
    ".styl": "",
    ".suo": "",
    ".t": "",
    ".tar": "",
    ".tgz": "",
    ".ts": "",
    ".tsx": "",
    ".ttf": "",
    ".twig": "",
    ".vi": "",
    ".vim": "",
    ".vimrc": "",
    ".vue": "﵂",
    ".xml": "",
    ".xul": "",
    ".xz": "",
    ".yaml": "",
    ".yml": "",
    ".zip": "",
    ".zsh": "",
    "/": "",
    "Brewfile": "",
    "Dockerfile": "",
    "LICENSE": "",
    "Makefile": "",
    "Makefile.ac": "",
    "Makefile.in": "",
    "README": "",
    "README.md": "",
    "README.rst": "",
    "README.txt": "",
    "Rakefile": "",
    "config": "",
    "lfrc": "",
    "requirements.txt": "",
}

for line in sys.stdin:
    line = line.strip()
    if not line:
        print("")
    elif len(sys.argv) == 2 and sys.argv[1] == "remove":
        if line[0] == "-" or " " not in line:
            print(line)
        else:
            icon, text = line.split(" ", 1)
            if icon == default_icon or icon in icons.values():
                print(text)
            else:
                print(line)
    else:
        if line[0] == "-":
            icon = ""
        elif line[-1] == "/":
            icon = icons.get(line) or icons.get("/")
        elif "/" in line:
            icon = icons.get(line.rsplit("/")[-1])
        else:
            icon = icons.get(line)
        if icon is None and "." in line:
            extension = "." + line.rsplit(".", 1)[1]
            icon = icons.get(extension)
        if icon is None:
            icon = default_icon
        print(f"{icon} {line}")
